"use strict";(()=>{var r;console.log("OTP file loaded");$("#second-continue").on("click",function(){$("#resend-otp-button").prop("disabled",!0),r=$("#phone").val(),r=parseInt(r),r="+91"+r,p(r),u()});function u(){let e=document.querySelector("#remainingTime"),n=5,i=setInterval(()=>{n<=0&&(clearInterval(i),$("#resend-otp-button").prop("disabled",!1)),e.value=n,e.textContent="("+n+")",n-=1},1e3)}var a=new Headers;a.append("Content-Type","application/json");a.append("Access-Control-Allow-Origin","https://plumhq.com");a.append("Access-Control-Allow-Credentials","true");async function p(e){var n=JSON.stringify({phone:e,channel:"SMS",key:"businessOTC"}),i={method:"POST",headers:a,body:n,redirect:"follow"};fetch("https://api-prod.plumhq.com/api/v2/authentication/phoneVerfication/otp/generate",i).then(t=>t.json()).then(t=>f(t)).catch(t=>console.log("error"))}function f(e){s=Object.entries(e),s=s[0][1],console.log(s)}$("#verify-otp").on("click",function(){h()});async function h(){var e=$("#otp-field").val(),n=JSON.stringify({code:e,requestId:s,channel:"SMS"}),i={method:"POST",headers:a,body:n,redirect:"follow"};fetch("https://api-prod.plumhq.com/api/v2/authentication/phoneVerfication/otp/verify",i).then(o=>o.json()).then(o=>t(o)).catch(o=>c());function t(o){var l=Object.entries(o);l=l[0],l[1]?(console.log("this is pressed"),$("#otp-continue-button").click()):d()}function d(){c.innerHTML="Incorrect OTP",c.style.display("block"),setTimeout(()=>{c.style.display("hide")},"3000")}function c(){c.innerHTML="An error occured."}}$("#resend-otp-button").on("click",function(){p()});var s,v=$("#incorrect-otp");})();
